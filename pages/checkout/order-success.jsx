import { useEffect } from 'react'
import NextLink from 'next/link'
import Head from 'next/head'
import { useRouter } from 'next/router'
import Layout from '@/layout/layout'
import { Box, Text, Heading, Alert } from '@chakra-ui/react'
import { ArrowBackIcon } from '@chakra-ui/icons'
import { Button } from '@/components/uiComponents'

// Thank you for purchasing, the product has been sent to your provided email. If you don't get the email-
// > Check Spam Folder.
// > Email us at- Contact@designholt.com
export default function OrderSuccess() {
	const router = useRouter()

	// useEffect(() => {
	// 	const raw = localStorage.getItem('checkout');
	// 	const checkout = JSON.parse(raw);
	// 	checkout?.isPaid ? null : router.push('/');
	// 	localStorage.removeItem('checkout');
	// 	// eslint-disable-next-line react-hooks/exhaustive-deps
	// }, []);

	useEffect(() => {
		if (typeof window !== 'undefined') {
			const tnxId = router.query.tnxId
			window.gtag('event', 'conversion', {
				send_to: 'AW-10887357969/pfefCKbR-dkDEJHMv8co',
				transaction_id: tnxId,
			})
		}
		// eslint-disable-next-line react-hooks/exhaustive-deps
	}, [])

	return (
		<Layout maxW="6xl">
			<Head>
				<title>Thank you | Designholt</title>
			</Head>

			<Box
				display="flex"
				flexDir="column"
				alignItems="center"
				justifyContent="center"
				my="20"
			>
				<Box w="60" mb="5">
					<svg
						viewBox="0 0 316 284"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g clipPath="url(#clip0_101_2)">
							<path
								d="M313.228 108.607C313.114 108.607 313.004 108.573 312.911 108.508L159.591 1.60518C158.635 0.941909 157.369 0.944129 156.415 1.61073L4.19892 108.507C4.0785 108.592 3.92946 108.625 3.78458 108.599C3.6397 108.574 3.51085 108.492 3.42638 108.371C3.34191 108.251 3.30874 108.101 3.33416 107.956C3.35958 107.811 3.44151 107.682 3.56193 107.598L155.779 0.701577C157.114 -0.231445 158.887 -0.23422 160.225 0.694361L313.545 107.597C313.642 107.664 313.715 107.761 313.753 107.873C313.791 107.985 313.793 108.106 313.758 108.219C313.722 108.332 313.652 108.43 313.557 108.5C313.461 108.57 313.346 108.608 313.228 108.607H313.228Z"
								fill="#3F3D56"
							/>
							<path
								d="M12.8972 112.397L158.153 4.61737L304.511 120.066L165.637 202.489L90.2407 185.283L12.8972 112.397Z"
								fill="#E6E6E6"
							/>
							<path
								d="M96.6051 253.398H24.8448C24.256 253.399 23.6775 253.244 23.1674 252.949C22.6573 252.655 22.2337 252.231 21.939 251.721C21.6444 251.21 21.4891 250.631 21.4889 250.042C21.4886 249.452 21.6434 248.873 21.9376 248.363C22.2325 247.852 22.6564 247.428 23.1667 247.134C23.6771 246.84 24.2558 246.685 24.8448 246.686H96.6045C97.1933 246.685 97.7718 246.84 98.2819 247.135C98.792 247.429 99.2156 247.853 99.5103 248.363C99.8049 248.874 99.9602 249.453 99.9604 250.042C99.9607 250.632 99.8059 251.211 99.5117 251.722C99.2168 252.232 98.7929 252.656 98.2826 252.95C97.7723 253.244 97.1935 253.399 96.6045 253.398H96.6051ZM50.591 238.967H24.8454C24.2566 238.968 23.678 238.813 23.168 238.518C22.6579 238.224 22.2342 237.8 21.9396 237.29C21.6449 236.779 21.4897 236.2 21.4894 235.611C21.4892 235.021 21.644 234.442 21.9382 233.932C22.233 233.421 22.657 232.997 23.1673 232.703C23.6776 232.409 24.2564 232.254 24.8454 232.255H50.591C51.1799 232.254 51.7584 232.409 52.2684 232.704C52.7785 232.998 53.2022 233.422 53.4968 233.932C53.7915 234.443 53.9467 235.022 53.947 235.611C53.9472 236.201 53.7925 236.78 53.4982 237.291C53.2034 237.801 52.7795 238.225 52.2691 238.519C51.7588 238.813 51.18 238.968 50.591 238.967V238.967Z"
								fill="#A463FF"
							/>
							<path
								d="M160.195 172.428C159.65 172.429 159.11 172.323 158.605 172.116L69.0211 134.902V18.4134C69.0225 17.3835 69.4319 16.3961 70.1593 15.6678C70.8868 14.9394 71.873 14.5296 72.9018 14.5282H244.761C245.79 14.5296 246.776 14.9394 247.504 15.6678C248.231 16.3961 248.641 17.3835 248.642 18.4134V134.983L248.474 135.056L161.834 172.099C161.315 172.317 160.758 172.429 160.195 172.429V172.428Z"
								fill="white"
							/>
							<path
								d="M160.195 172.706C159.614 172.706 159.037 172.593 158.499 172.373L68.7439 135.087V18.4134C68.7453 17.3098 69.1839 16.2519 69.9633 15.4715C70.7427 14.6912 71.7995 14.2521 72.9018 14.2506H244.761C245.864 14.2521 246.92 14.6912 247.7 15.4715C248.479 16.2519 248.918 17.3098 248.919 18.4134V135.167L161.943 172.354C161.39 172.587 160.795 172.707 160.195 172.706V172.706ZM69.8526 134.346L158.922 171.347C159.753 171.685 160.683 171.679 161.51 171.332L247.811 134.433V18.4134C247.809 17.6043 247.487 16.8286 246.916 16.2565C246.344 15.6843 245.57 15.3622 244.761 15.3607H72.9018C72.0935 15.3622 71.3188 15.6843 70.7473 16.2565C70.1758 16.8286 69.8541 17.6043 69.8526 18.4134V134.346Z"
								fill="#3F3D56"
							/>
							<path
								d="M312.119 107.497H312.008L248.365 134.705L161.288 171.932C160.6 172.221 159.826 172.226 159.136 171.943L69.2982 134.628L4.09137 107.542L3.99158 107.497H3.8807C2.85193 107.499 1.86571 107.909 1.13825 108.637C0.410796 109.365 0.00146654 110.353 0 111.383V280.115C0.00146654 281.145 0.410796 282.132 1.13825 282.86C1.86571 283.589 2.85193 283.999 3.8807 284H312.119C313.148 283.999 314.134 283.589 314.862 282.86C315.589 282.132 315.999 281.145 316 280.115V111.383C315.999 110.353 315.589 109.365 314.862 108.637C314.134 107.909 313.148 107.499 312.119 107.497V107.497ZM314.891 280.115C314.891 281.647 313.65 282.889 312.119 282.89H3.8807C2.35004 282.889 1.10933 281.647 1.10877 280.115V111.383C1.10963 110.665 1.38762 109.975 1.88461 109.458C2.3816 108.941 3.05908 108.636 3.77537 108.607L69.2982 135.827L158.71 172.97C159.677 173.364 160.762 173.358 161.725 172.953L248.365 135.91L312.23 108.607C313.715 108.672 314.888 109.894 314.891 111.383V280.115Z"
								fill="#3F3D56"
							/>
							<path
								d="M159.3 139.397C155.993 139.403 152.773 138.332 150.127 136.346L149.963 136.223L115.419 109.743C111.066 106.404 108.824 100.994 109.536 95.5512C110.247 90.1079 113.805 85.4589 118.87 83.3542C123.934 81.2495 129.735 82.0105 134.087 85.349L156.462 102.526L209.338 33.4867C210.565 31.8852 212.094 30.5413 213.839 29.5316C215.584 28.522 217.51 27.8664 219.509 27.6023C221.507 27.3382 223.537 27.4708 225.484 27.9924C227.431 28.5141 229.256 29.4146 230.856 30.6426L230.527 31.0894L230.864 30.6493C237.582 35.8184 238.852 45.4555 233.705 52.1921L171.51 133.4C168.594 137.193 164.08 139.41 159.3 139.397Z"
								fill="#A463FF"
							/>
						</g>
						<defs>
							<clipPath id="clip0_101_2">
								<rect width="316" height="284" fill="white" />
							</clipPath>
						</defs>
					</svg>
				</Box>
				<Box textAlign="center" my="5">
					<Heading color="gray.900">Thank you for purchasing!</Heading>
					<Text my="2">
						The product has been sent to your provided email. You may receive it
						within 5-10 minutes.
					</Text>
				</Box>
				<NextLink href="/" passHref>
					<Button
						as="a"
						leftIcon={<ArrowBackIcon />}
						variant="ghost"
						colorScheme="purple"
					>
						Go back to the home page
					</Button>
				</NextLink>
				<Alert status="warning" variant="left-accent" fontSize="sm" my="10">
					In case if you can&apos;t find the email-
					<br />
					&gt; Check Spam Folder. <br />
					&gt; Email us at- contact@designholt.net
				</Alert>
			</Box>
		</Layout>
	)
}
